{"remainingRequest":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/babel-loader/lib/index.js!/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/eslint-loader/index.js??ref--13-0!/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/services/BlingService.js","dependencies":[{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/services/BlingService.js","mtime":1607793312910},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2thcnRvbi9Eb2N1bWVudHMvcHJvamVjdHMvQ1ZfR0lUSFVCL2E0LWdyb3VwLTYyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCnZhciBmZXRjaCA9IHJlcXVpcmUoJ25vZGUtZmV0Y2gnKTsKCnZhciBCTElOR19CQVNFX1VSTCA9ICdodHRwczovL3dlYi1lbmdpbmVlcmluZy5iaWcudHV3aWVuLmFjLmF0L3MyMC9ibGluZyc7Ci8qKgogKiBDb25maXJtcyBhIHBheW1lbnQgaW50ZW50IHdpdGggQmxpbmcgdG8gZXhlY3V0ZSBhIHBheW1lbnQgdHJhbnNhY3Rpb24uCiAqIAogKiBAcGFyYW0ge3N0cmluZ30gcGF5bWVudEludGVudElkIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBwYXltZW50IGludGVudC4KICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudFNlY3JldCBUaGUgY2xpZW50IHNlY3JldCBvZiB0aGUgcGF5bWVudCBpbnRlbnQuCiAqIEBwYXJhbSB7T2JqZWN0fSBjYXJkIEN1c3RvbWVyIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uLgogKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcGF5bWVudCBzdWNjZWVkZWQgb3Igbm90LgogKi8KCmV4cG9ydCBmdW5jdGlvbiBjb25maXJtUGF5bWVudEludGVudChfeCwgX3gyLCBfeDMpIHsKICByZXR1cm4gX2NvbmZpcm1QYXltZW50SW50ZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9jb25maXJtUGF5bWVudEludGVudCgpIHsKICBfY29uZmlybVBheW1lbnRJbnRlbnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGF5bWVudEludGVudElkLCBjbGllbnRTZWNyZXQsIGNhcmQpIHsKICAgIHZhciByZXMsIGNvbjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBmZXRjaChCTElOR19CQVNFX1VSTCArICcvcGF5bWVudF9pbnRlbnRzLycgKyBwYXltZW50SW50ZW50SWQgKyAnL2NvbmZpcm0nLCB7CiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICdDb250ZW50LUxlbmd0aCc6IDE2NwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgImNsaWVudF9zZWNyZXQiOiBjbGllbnRTZWNyZXQsCiAgICAgICAgICAgICAgICAiY2FyZGhvbGRlciI6IGNhcmQuY2FyZGhvbGRlciwKICAgICAgICAgICAgICAgICJjYXJkbnVtYmVyIjogY2FyZC5udW1iZXIsCiAgICAgICAgICAgICAgICAiZXhwX21vbnRoIjogY2FyZC5leHBfbW9udGgsCiAgICAgICAgICAgICAgICAiZXhwX3llYXIiOiBjYXJkLmV4cF95ZWFyLAogICAgICAgICAgICAgICAgImN2YyI6IGNhcmQuY3ZjCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjb24gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgYm9keTogY29uLAogICAgICAgICAgICAgIHN0YXR1czogcmVzLnN0YXR1cwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfY29uZmlybVBheW1lbnRJbnRlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/services/BlingService.js"],"names":["fetch","require","BLING_BASE_URL","confirmPaymentIntent","paymentIntentId","clientSecret","card","method","headers","body","JSON","stringify","cardholder","number","exp_month","exp_year","cvc","res","json","con","status"],"mappings":";;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,YAAD,CAArB;;AACA,IAAMC,cAAc,GAAG,oDAAvB;AAEA;;;;;;;;;AAQA,gBAAsBC,oBAAtB;AAAA;AAAA;;;kFAAO,iBAAoCC,eAApC,EAAqDC,YAArD,EAAmEC,IAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACeN,KAAK,CAACE,cAAc,GAAG,mBAAjB,GAAuCE,eAAvC,GAAyD,UAA1D,EAAsE;AACzFG,cAAAA,MAAM,EAAE,MADiF;AAEzFC,cAAAA,OAAO,EAAE;AACL,gCAAgB,kBADX;AAEL,kCAAkB;AAFb,eAFgF;AAMzFC,cAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjB,iCAAiBN,YADA;AAEjB,8BAAcC,IAAI,CAACM,UAFF;AAGjB,8BAAcN,IAAI,CAACO,MAHF;AAIjB,6BAAaP,IAAI,CAACQ,SAJD;AAKjB,4BAAYR,IAAI,CAACS,QALA;AAMjB,uBAAOT,IAAI,CAACU;AANK,eAAf;AANmF,aAAtE,CADpB;;AAAA;AACGC,YAAAA,GADH;AAAA;AAAA,mBAiBeA,GAAG,CAACC,IAAJ,EAjBf;;AAAA;AAiBGC,YAAAA,GAjBH;AAAA,6CAmBI;AAACV,cAAAA,IAAI,EAAEU,GAAP;AAAYC,cAAAA,MAAM,EAAEH,GAAG,CAACG;AAAxB,aAnBJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["const fetch = require('node-fetch');\nconst BLING_BASE_URL = 'https://web-engineering.big.tuwien.ac.at/s20/bling'\n\n/**\n * Confirms a payment intent with Bling to execute a payment transaction.\n * \n * @param {string} paymentIntentId The identifier of the payment intent.\n * @param {string} clientSecret The client secret of the payment intent.\n * @param {Object} card Customer credit card information.\n * @returns {boolean} Whether the payment succeeded or not.\n */\nexport async function confirmPaymentIntent(paymentIntentId, clientSecret, card) {\n    const res = await fetch(BLING_BASE_URL + '/payment_intents/' + paymentIntentId + '/confirm', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': 167\n        },\n        body: JSON.stringify({\n            \"client_secret\": clientSecret,\n            \"cardholder\": card.cardholder,\n            \"cardnumber\": card.number,\n            \"exp_month\": card.exp_month,\n            \"exp_year\": card.exp_year,\n            \"cvc\": card.cvc\n        })\n    })\n    \n    const con = await res.json();\n\n    return {body: con, status: res.status}\n}\n"]}]}