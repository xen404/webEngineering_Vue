{"remainingRequest":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/pages/Config.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/pages/Config.vue","mtime":1607793312909},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIEFydG1hcnRTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQXJ0bWFydFNlcnZpY2UiOwppbXBvcnQgRnJhbWVkQXJ0d29yayBmcm9tICJAL2NvbXBvbmVudHMvRnJhbWVkQXJ0d29yayI7CmltcG9ydCBNdXNldW1MYWJlbCBmcm9tICJAL2NvbXBvbmVudHMvTXVzZXVtTGFiZWwiOwppbXBvcnQgUHJpbnRTaXplUGlja2VyIGZyb20gIkAvY29tcG9uZW50cy9jb25maWcvUHJpbnRTaXplUGlja2VyIjsKaW1wb3J0IFdpZHRoU2xpZGVyIGZyb20gIkAvY29tcG9uZW50cy9jb25maWcvV2lkdGhTbGlkZXIiOwppbXBvcnQgRnJhbWVTdHlsZVBpY2tlciBmcm9tICJAL2NvbXBvbmVudHMvY29uZmlnL0ZyYW1lU3R5bGVQaWNrZXIiOwppbXBvcnQgTWF0Q29sb3JQaWNrZXIgZnJvbSAiQC9jb21wb25lbnRzL2NvbmZpZy9NYXRDb2xvclBpY2tlciIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29uZmlnIiwKICBjb21wb25lbnRzOiB7CiAgICBGcmFtZWRBcnR3b3JrLAogICAgTXVzZXVtTGFiZWwsCiAgICBQcmludFNpemVQaWNrZXIsCiAgICBXaWR0aFNsaWRlciwKICAgIEZyYW1lU3R5bGVQaWNrZXIsCiAgICBNYXRDb2xvclBpY2tlcgogIH0sCiAgcHJvcHM6IHsKICAgIGFydHdvcmtJZDogTnVtYmVyCiAgfSwKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIGFydHdvcms6IG51bGwsCiAgICAgIHByaW50U2l6ZXM6IHsgUzogWzAsIDBdLCBNOiBbMCwgMF0sIEw6IFswLCAwXSB9LAogICAgICBjb25maWc6IHsKICAgICAgICBwcmludFNpemU6ICJNIiwKICAgICAgICBmcmFtZVdpZHRoOiA0MCwKICAgICAgICBmcmFtZVN0eWxlOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnNvcnRlZEZyYW1lc1swXS5zdHlsZSwKICAgICAgICBtYXRXaWR0aDogNTUsCiAgICAgICAgbWF0Q29sb3I6IHRoaXMuJHN0b3JlLmdldHRlcnMuc29ydGVkTWF0c1swXS5jb2xvcgogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZyYW1lKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZnJhbWVzLmdldCh0aGlzLmNvbmZpZy5mcmFtZVN0eWxlKTsKICAgIH0sCiAgICBwcmljZSgpIHsKICAgICAgY29uc3QgY0YgPSAodGhpcy5jb25maWcuZnJhbWVXaWR0aCAvIDEwKSAqIHRoaXMuZnJhbWUuY29zdDsKICAgICAgY29uc3QgY00gPSAodGhpcy5jb25maWcubWF0V2lkdGggLyAxMCkgKiA1OwogICAgICBjb25zdCBzID0geyBTOiAxLCBNOiAyLCBMOiAzLjUgfVt0aGlzLmNvbmZpZy5wcmludFNpemVdOwogICAgICByZXR1cm4gKCgzMDAwICsgY0YgKyBjTSkgKiBzKS8xMDA7CiAgICB9LAogICAgdG90YWxTaXplKCkgewogICAgICBjb25zdCBbdywgaF0gPSB0aGlzLnByaW50U2l6ZXNbdGhpcy5jb25maWcucHJpbnRTaXplXTsKICAgICAgY29uc3QgeCA9IDIgKiB0aGlzLmNvbmZpZy5mcmFtZVdpZHRoICsgMiAqIHRoaXMuY29uZmlnLm1hdFdpZHRoOwogICAgICByZXR1cm4gW3cgKyB4LCBoICsgeF07CiAgICB9LAogICAgdG90YWxTaXplVGV4dCgpIHsKICAgICAgY29uc3QgW3csIGhdID0gdGhpcy50b3RhbFNpemU7CiAgICAgIHJldHVybiAodyAvIDEwKS50b0ZpeGVkKDEpICsgIiDDlyAiICsgKGggLyAxMCkudG9GaXhlZCgxKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBBcnRtYXJ0U2VydmljZS5nZXRBcnR3b3JrKHRoaXMuYXJ0d29ya0lkKS50aGVuKGFydHdvcmsgPT4gewogICAgICBpZiAoYXJ0d29yayA9PSBudWxsKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBwYXRoOiAiL3NlYXJjaCIgfSk7CiAgICAgIH0KICAgICAgdGhpcy5hcnR3b3JrID0gYXJ0d29yazsKICAgICAgCiAgICB9KTsKCiAgICBjb25zdCBjbGFtcCA9ICh4LCBtaW4sIG1heCkgPT4gTWF0aC50cnVuYyhNYXRoLm1pbihNYXRoLm1heCh4LCBtaW4pLCBtYXgpKTsKCiAgICBjb25zdCBxdWVyeSA9IHRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgaWYgKFsiUyIsICJNIiwgIkwiXS5pbmNsdWRlcyhxdWVyeS5wcmludFNpemUpKSB7CiAgICAgIHRoaXMuY29uZmlnLnByaW50U2l6ZSA9IHF1ZXJ5LnByaW50U2l6ZTsKICAgIH0KICAgIGlmIChpc0Zpbml0ZSgrcXVlcnkuZnJhbWVXaWR0aCkpIHsKICAgICAgdGhpcy5jb25maWcuZnJhbWVXaWR0aCA9IGNsYW1wKCtxdWVyeS5mcmFtZVdpZHRoLCAyMCwgNTApOwogICAgfQogICAgY29uc3QgZnJhbWVTdHlsZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnNvcnRlZEZyYW1lcy5tYXAoeCA9PiB4LnN0eWxlKTsKICAgIGlmIChmcmFtZVN0eWxlcy5pbmNsdWRlcyhxdWVyeS5mcmFtZVN0eWxlKSkgewogICAgICB0aGlzLmNvbmZpZy5mcmFtZVN0eWxlID0gcXVlcnkuZnJhbWVTdHlsZTsKICAgIH0KICAgIGlmIChpc0Zpbml0ZSgrcXVlcnkubWF0V2lkdGgpKSB7CiAgICAgIHRoaXMuY29uZmlnLm1hdFdpZHRoID0gY2xhbXAoK3F1ZXJ5Lm1hdFdpZHRoLCAwLCAxMDApOwogICAgfQogICAgY29uc3QgbWF0Q29sb3JzID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5zb3J0ZWRNYXRzLm1hcCh4ID0+IHguY29sb3IpOwogICAgaWYgKG1hdENvbG9ycy5pbmNsdWRlcyhxdWVyeS5tYXRDb2xvcikpIHsKICAgICAgdGhpcy5jb25maWcubWF0Q29sb3IgPSBxdWVyeS5tYXRDb2xvcjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjb25maWc6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICBjb25zdCBxID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICAgICAgY29uc3QgYyA9IHRoaXMuY29uZmlnOwogICAgICAgIGlmICgKICAgICAgICAgIHEuZnJhbWVXaWR0aCAhPSBjLmZyYW1lV2lkdGggfHwKICAgICAgICAgIHEubWF0V2lkdGggIT0gYy5tYXRXaWR0aCB8fAogICAgICAgICAgcS5mcmFtZVN0eWxlICE9IGMuZnJhbWVTdHlsZSB8fAogICAgICAgICAgcS5tYXRDb2xvciAhPSBjLm1hdENvbG9yIHx8CiAgICAgICAgICBxLnByaW50U2l6ZSAhPSBjLnByaW50U2l6ZQogICAgICAgICkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBxdWVyeTogdGhpcy5jb25maWcgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdCgpewogICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJhZGRUb0NhcnQiLCB7YXJ0d29ya0lkOiB0aGlzLmFydHdvcmtJZCwgZnJhbWVTdHlsZTogdGhpcy5jb25maWcuZnJhbWVTdHlsZSwgZnJhbWVXaWR0aDogdGhpcy5jb25maWcuZnJhbWVXaWR0aCwgbWF0Q29sb3I6IHRoaXMuY29uZmlnLm1hdENvbG9yLCBtYXRXaWR0aDogdGhpcy5jb25maWcubWF0V2lkdGgsIHByaW50U2l6ZTogdGhpcy5jb25maWcucHJpbnRTaXplfSkKICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2Uoe3BhdGg6ICIvY2FydCJ9KQogICAgICAKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Config.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Config.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <main class=\"config-main\">\n    <section class=\"configurator\">\n      <div class=\"preview\" v-if=\"artwork\">\n        <framed-artwork :artwork=\"artwork\" :config=\"config\" @print-sizes=\"printSizes = $event\" />\n        <museum-label :artwork=\"artwork\" />\n      </div>\n\n      <form class=\"museum-label\" id=\"config-form\" @submit.prevent>\n        <print-size-picker v-model=\"config.printSize\" :printSizes=\"printSizes\" />\n        <width-slider :label=\"'Frame'\" :max=\"50\" :min=\"20\" :value=\"config.frameWidth\" v-model=\"config.frameWidth\" />\n        <frame-style-picker :value=\"config.frameStyle\" v-model=\"config.frameStyle\"/>\n        <width-slider :label=\"'Mat'\" :max=\"100\" :min=\"0\" :value=\"config.matWidth\" v-model=\"config.matWidth\"/>\n        <mat-color-picker :value=\"config.matColor\" v-model=\"config.matColor\"/>\n        <fieldset>\n          <legend>Price</legend>\n          <div class=\"config-row\">\n            <label for=\"price\">Price (excl. shipping)</label>\n            <div>\n              <span class=\"price\" id=\"price\">€ {{price.toFixed(2)}}</span>\n            </div>\n          </div>\n          <div class=\"config-row\">\n            <label for=\"total-size\">Total Size (incl. frame and mat)</label>\n            <div id=\"total-size\">{{totalSizeText}} cm</div>\n          </div>\n          <button type=\"button\" class=\"buy\" @click=\"onSubmit()\">Add to Cart</button>\n        </fieldset>\n      </form>\n    </section>\n  </main>\n</template>\n\n<script>\nimport * as ArtmartService from \"@/services/ArtmartService\";\nimport FramedArtwork from \"@/components/FramedArtwork\";\nimport MuseumLabel from \"@/components/MuseumLabel\";\nimport PrintSizePicker from \"@/components/config/PrintSizePicker\";\nimport WidthSlider from \"@/components/config/WidthSlider\";\nimport FrameStylePicker from \"@/components/config/FrameStylePicker\";\nimport MatColorPicker from \"@/components/config/MatColorPicker\"\n\nexport default {\n  name: \"Config\",\n  components: {\n    FramedArtwork,\n    MuseumLabel,\n    PrintSizePicker,\n    WidthSlider,\n    FrameStylePicker,\n    MatColorPicker\n  },\n  props: {\n    artworkId: Number\n  },\n  data: function() {\n    return {\n      artwork: null,\n      printSizes: { S: [0, 0], M: [0, 0], L: [0, 0] },\n      config: {\n        printSize: \"M\",\n        frameWidth: 40,\n        frameStyle: this.$store.getters.sortedFrames[0].style,\n        matWidth: 55,\n        matColor: this.$store.getters.sortedMats[0].color\n      }\n    };\n  },\n  computed: {\n    frame() {\n      return this.$store.state.frames.get(this.config.frameStyle);\n    },\n    price() {\n      const cF = (this.config.frameWidth / 10) * this.frame.cost;\n      const cM = (this.config.matWidth / 10) * 5;\n      const s = { S: 1, M: 2, L: 3.5 }[this.config.printSize];\n      return ((3000 + cF + cM) * s)/100;\n    },\n    totalSize() {\n      const [w, h] = this.printSizes[this.config.printSize];\n      const x = 2 * this.config.frameWidth + 2 * this.config.matWidth;\n      return [w + x, h + x];\n    },\n    totalSizeText() {\n      const [w, h] = this.totalSize;\n      return (w / 10).toFixed(1) + \" × \" + (h / 10).toFixed(1);\n    }\n  },\n  mounted() {\n    ArtmartService.getArtwork(this.artworkId).then(artwork => {\n      if (artwork == null) {\n        this.$router.replace({ path: \"/search\" });\n      }\n      this.artwork = artwork;\n      \n    });\n\n    const clamp = (x, min, max) => Math.trunc(Math.min(Math.max(x, min), max));\n\n    const query = this.$route.query;\n    if ([\"S\", \"M\", \"L\"].includes(query.printSize)) {\n      this.config.printSize = query.printSize;\n    }\n    if (isFinite(+query.frameWidth)) {\n      this.config.frameWidth = clamp(+query.frameWidth, 20, 50);\n    }\n    const frameStyles = this.$store.getters.sortedFrames.map(x => x.style);\n    if (frameStyles.includes(query.frameStyle)) {\n      this.config.frameStyle = query.frameStyle;\n    }\n    if (isFinite(+query.matWidth)) {\n      this.config.matWidth = clamp(+query.matWidth, 0, 100);\n    }\n    const matColors = this.$store.getters.sortedMats.map(x => x.color);\n    if (matColors.includes(query.matColor)) {\n      this.config.matColor = query.matColor;\n    }\n  },\n  watch: {\n    config: {\n      deep: true,\n      handler() {\n        const q = this.$route.query;\n        const c = this.config;\n        if (\n          q.frameWidth != c.frameWidth ||\n          q.matWidth != c.matWidth ||\n          q.frameStyle != c.frameStyle ||\n          q.matColor != c.matColor ||\n          q.printSize != c.printSize\n        ) {\n          this.$router.replace({ query: this.config });\n        }\n      }\n    }\n  },\n  methods: {\n    onSubmit(){\n     this.$store.dispatch(\"addToCart\", {artworkId: this.artworkId, frameStyle: this.config.frameStyle, frameWidth: this.config.frameWidth, matColor: this.config.matColor, matWidth: this.config.matWidth, printSize: this.config.printSize})\n      this.$router.replace({path: \"/cart\"})\n      \n    }\n  }\n};\n</script>\n\n<style>\n.configurator fieldset {\n  border: none;\n  min-width: auto;\n  border-bottom: 1px solid #eff2f5;\n  padding: 15px 20px 15px 20px;\n  margin: 0;\n}\n\n.configurator fieldset:last-of-type {\n  border-bottom: none;\n  display: flex;\n  flex-direction: column;\n}\n\n/* legend is necessary for accessibility, but we don't want to show it */\n.configurator fieldset legend {\n  position: absolute;\n  clip: rect(0 0 0 0);\n}\n</style>\n\n<style scoped>\n.preview {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 500px;\n  max-height: 500px;\n  min-width: 250px;\n  flex: 1 1 250px;\n  margin: 2rem 50px;\n}\n\n.preview img {\n  box-shadow: 0px 30px 60px 0px rgba(0, 0, 0, 0.5);\n}\n\n.preview .museum-label {\n  font-size: 0.9rem;\n  margin-top: 2rem;\n  padding: 1em;\n}\n\n.configurator {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: center;\n  margin-bottom: 4rem;\n}\n\n.configurator form {\n  width: 400px;\n}\n\n@media (max-width: 600px) {\n  .config-main {\n    margin: 0;\n  }\n\n  .preview {\n    width: 90%;\n    flex: 0 0 auto;\n    margin-left: 0;\n    margin-right: 0;\n  }\n\n  .configurator {\n    flex-direction: column;\n    width: 100%;\n    margin: 0;\n  }\n\n  .configurator form {\n    width: 100%;\n    box-shadow: none;\n  }\n}\n\n.config-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n}\n\n.price {\n  font-weight: bold;\n  font-size: 1.5rem;\n}\n\n.buy {\n  margin-top: 1rem;\n  width: 100%;\n}\n</style>"]}]}