{"remainingRequest":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/components/FramedArtwork.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/src/components/FramedArtwork.vue","mtime":1607793312907},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karton/Documents/projects/CV_GITHUB/a4-group-62/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRnJhbWVkQXJ0d29yayIsCiAgcHJvcHM6IHsKICAgIGFydHdvcms6IHsKICAgICAgaW1hZ2U6IFN0cmluZywKICAgICAgdGl0bGU6IFN0cmluZwogICAgfSwKICAgIGNvbmZpZzogewogICAgICBwcmludFNpemU6IFN0cmluZywKICAgICAgZnJhbWVTdHlsZTogU3RyaW5nLAogICAgICBtYXRDb2xvcjogU3RyaW5nCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJpbnRTaXplczogeyBTOiBbMCwgMF0sIE06IFswLCAwXSwgTDogWzAsIDBdIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZnJhbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5mcmFtZXMuZ2V0KHRoaXMuY29uZmlnLmZyYW1lU3R5bGUpOwogICAgfSwKICAgIG1hdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1hdHMuZ2V0KHRoaXMuY29uZmlnLm1hdENvbG9yKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjb25maWc6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnJlbmRlclByZXZpZXcoKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25JbWFnZUxvYWQoKSB7CiAgICAgIHRoaXMuY2FsY3VsYXRlUHJpbnRTaXplcygpOwogICAgICB0aGlzLnJlbmRlclByZXZpZXcoKTsKICAgIH0sCiAgICBjYWxjdWxhdGVQcmludFNpemVzKCkgewogICAgICBjb25zdCBpbWcgPSB0aGlzLiRyZWZzLnByZXZpZXdJbWFnZTsKICAgICAgY29uc3QgdyA9IGltZy5uYXR1cmFsV2lkdGg7CiAgICAgIGNvbnN0IGggPSBpbWcubmF0dXJhbEhlaWdodDsKCiAgICAgIGxldCBTID0gWzI5NywgMjk3XTsgLy8gQTQKICAgICAgbGV0IE0gPSBbNDIwLCA0MjBdOyAvLyBBMwogICAgICBsZXQgTCA9IFs1OTQsIDU5NF07IC8vIEEyCgogICAgICBpZiAoaCA+IHcpIHsKICAgICAgICBTWzBdID0gTWF0aC5mbG9vcigodyAqIFNbMV0pIC8gaCk7CiAgICAgICAgTVswXSA9IE1hdGguZmxvb3IoKHcgKiBNWzFdKSAvIGgpOwogICAgICAgIExbMF0gPSBNYXRoLmZsb29yKCh3ICogTFsxXSkgLyBoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBTWzFdID0gTWF0aC5mbG9vcigoaCAqIFNbMF0pIC8gdyk7CiAgICAgICAgTVsxXSA9IE1hdGguZmxvb3IoKGggKiBNWzBdKSAvIHcpOwogICAgICAgIExbMV0gPSBNYXRoLmZsb29yKChoICogTFswXSkgLyB3KTsKICAgICAgfQoKICAgICAgdGhpcy5wcmludFNpemVzID0geyBTLCBNLCBMIH07CiAgICAgIHRoaXMuJGVtaXQoInByaW50LXNpemVzIiwgdGhpcy5wcmludFNpemVzKTsKICAgIH0sCiAgICByZW5kZXJQcmV2aWV3KCkgewogICAgICBjb25zdCBpbWcgPSB0aGlzLiRyZWZzLnByZXZpZXdJbWFnZTsKICAgICAgY29uc3QgY29udGFpbmVyID0gaW1nLnBhcmVudE5vZGU7CgogICAgICBjb25zdCBbdywgaF0gPSB0aGlzLnByaW50U2l6ZXNbdGhpcy5jb25maWcucHJpbnRTaXplXTsKICAgICAgY29uc3QgbWF0V2lkdGggPSB0aGlzLmNvbmZpZy5tYXRXaWR0aDsKICAgICAgY29uc3QgZnJhbWVXaWR0aCA9IHRoaXMuY29uZmlnLmZyYW1lV2lkdGg7CgogICAgICBsZXQgeDsKICAgICAgaWYgKHcgPiBoKSB7CiAgICAgICAgeCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aCAvICh3ICsgMiAqIG1hdFdpZHRoICsgMiAqIGZyYW1lV2lkdGgpOwogICAgICB9IGVsc2UgewogICAgICAgIHggPSBjb250YWluZXIub2Zmc2V0SGVpZ2h0IC8gKGggKyAyICogbWF0V2lkdGggKyAyICogZnJhbWVXaWR0aCk7CiAgICAgIH0KCiAgICAgIGltZy5zdHlsZS5ib3hTaXppbmcgPSAiYm9yZGVyLWJveCI7CiAgICAgIGltZy53aWR0aCA9ICh3ICsgMiAqIG1hdFdpZHRoICsgMiAqIGZyYW1lV2lkdGgpICogeDsKICAgICAgaW1nLmhlaWdodCA9IChoICsgMiAqIG1hdFdpZHRoICsgMiAqIGZyYW1lV2lkdGgpICogeDsKICAgICAgaW1nLnN0eWxlLmJvcmRlckltYWdlU291cmNlID0gYHVybCgke3RoaXMuZnJhbWUuYm9yZGVySW1hZ2V9YDsKICAgICAgaW1nLnN0eWxlLmJvcmRlckltYWdlU2xpY2UgPSB0aGlzLmZyYW1lLnNsaWNlOwogICAgICBpbWcuc3R5bGUuYm9yZGVyV2lkdGggPSBgJHtmcmFtZVdpZHRoICogeH1weGA7CiAgICAgIGltZy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLm1hdC5oZXg7CiAgICAgIGltZy5zdHlsZS5wYWRkaW5nID0gYCR7bWF0V2lkdGggKiB4fXB4YDsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["FramedArtwork.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FramedArtwork.vue","sourceRoot":"src/components","sourcesContent":["<template slot=\"framed-artwork\">\n  <img :src=\"artwork.image\" alt=\"artwork.title\" ref=\"previewImage\" @load=\"onImageLoad\" />\n</template>\n\n<script>\nexport default {\n  name: \"FramedArtwork\",\n  props: {\n    artwork: {\n      image: String,\n      title: String\n    },\n    config: {\n      printSize: String,\n      frameStyle: String,\n      matColor: String\n    }\n  },\n  data() {\n    return {\n      printSizes: { S: [0, 0], M: [0, 0], L: [0, 0] }\n    };\n  },\n  computed: {\n    frame() {\n      return this.$store.state.frames.get(this.config.frameStyle);\n    },\n    mat() {\n      return this.$store.state.mats.get(this.config.matColor);\n    }\n  },\n  watch: {\n    config: {\n      deep: true,\n      handler() {\n        this.renderPreview();\n      }\n    }\n  },\n  methods: {\n    onImageLoad() {\n      this.calculatePrintSizes();\n      this.renderPreview();\n    },\n    calculatePrintSizes() {\n      const img = this.$refs.previewImage;\n      const w = img.naturalWidth;\n      const h = img.naturalHeight;\n\n      let S = [297, 297]; // A4\n      let M = [420, 420]; // A3\n      let L = [594, 594]; // A2\n\n      if (h > w) {\n        S[0] = Math.floor((w * S[1]) / h);\n        M[0] = Math.floor((w * M[1]) / h);\n        L[0] = Math.floor((w * L[1]) / h);\n      } else {\n        S[1] = Math.floor((h * S[0]) / w);\n        M[1] = Math.floor((h * M[0]) / w);\n        L[1] = Math.floor((h * L[0]) / w);\n      }\n\n      this.printSizes = { S, M, L };\n      this.$emit(\"print-sizes\", this.printSizes);\n    },\n    renderPreview() {\n      const img = this.$refs.previewImage;\n      const container = img.parentNode;\n\n      const [w, h] = this.printSizes[this.config.printSize];\n      const matWidth = this.config.matWidth;\n      const frameWidth = this.config.frameWidth;\n\n      let x;\n      if (w > h) {\n        x = container.offsetWidth / (w + 2 * matWidth + 2 * frameWidth);\n      } else {\n        x = container.offsetHeight / (h + 2 * matWidth + 2 * frameWidth);\n      }\n\n      img.style.boxSizing = \"border-box\";\n      img.width = (w + 2 * matWidth + 2 * frameWidth) * x;\n      img.height = (h + 2 * matWidth + 2 * frameWidth) * x;\n      img.style.borderImageSource = `url(${this.frame.borderImage}`;\n      img.style.borderImageSlice = this.frame.slice;\n      img.style.borderWidth = `${frameWidth * x}px`;\n      img.style.backgroundColor = this.mat.hex;\n      img.style.padding = `${matWidth * x}px`;\n    }\n  }\n};\n</script>\n\n<style scoped>\nimg {\n  border: 0px solid black; /* necessary for Chrome & Firefox */\n}\n</style>\n"]}]}